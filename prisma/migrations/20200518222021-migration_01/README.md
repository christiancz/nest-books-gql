# Migration `20200518222021-migration_01`

This migration has been generated by mcra02 at 5/18/2020, 10:20:21 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."authors" (
"country" text  NOT NULL ,"id" SERIAL,"name" text  NOT NULL ,"register_by" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."books" (
"description" text  NOT NULL ,"id" SERIAL,"price" Decimal(65,30)  NOT NULL ,"quantity" integer  NOT NULL ,"register_by" integer  NOT NULL ,"title" text  NOT NULL ,"writted_by" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."users" (
"email" text  NOT NULL ,"id" SERIAL,"lastname" text  NOT NULL ,"name" text  NOT NULL ,"password" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "users.email" ON "public"."users"("email")

ALTER TABLE "public"."authors" ADD FOREIGN KEY ("register_by")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."books" ADD FOREIGN KEY ("register_by")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."books" ADD FOREIGN KEY ("writted_by")REFERENCES "public"."authors"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200518222021-migration_01
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,39 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model authors {
+  country     String
+  id          Int     @default(autoincrement()) @id
+  name        String
+  register_by Int
+  users       users   @relation(fields: [register_by], references: [id])
+  books       books[]
+}
+
+model books {
+  description String
+  id          Int     @default(autoincrement()) @id
+  price       Float
+  quantity    Int
+  register_by Int
+  title       String
+  writted_by  Int
+  users       users   @relation(fields: [register_by], references: [id])
+  authors     authors @relation(fields: [writted_by], references: [id])
+}
+
+model users {
+  email    String    @unique
+  id       Int       @default(autoincrement()) @id
+  lastname String
+  name     String
+  password String
+  authors  authors[]
+  books    books[]
+}
```


